<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quickstart • growthcleanr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Quickstart">
<meta property="og:description" content="growthcleanr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">growthcleanr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/usage.html">Usage</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Advanced topics</li>
    <li>
      <a href="../articles/configuration.html">Configuration</a>
    </li>
    <li>
      <a href="../articles/output.html">Understanding growthcleanr output</a>
    </li>
    <li>
      <a href="../articles/adult-algorithm.html">Adult algorithm</a>
    </li>
    <li>
      <a href="../articles/utilities.html">Utilities for computing pediatric BMI percentiles, Z-scores, and related tools</a>
    </li>
    <li>
      <a href="../articles/large-data-sets.html">Working with large data sets</a>
    </li>
    <li>
      <a href="../articles/next-steps.html">Next steps</a>
    </li>
    <li>
      <a href="../articles/developer-guidelines.html">Developer guidelines</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/carriedaymont/growthcleanr" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quickstart</h1>
            
            <h4 data-toc-skip class="date">2023-03-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/carriedaymont/growthcleanr/blob/main/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="hidden name"><code>quickstart.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="r-setup">R setup<a class="anchor" aria-label="anchor" href="#r-setup"></a>
</h2>
<p>To get started with <code>growthcleanr</code>, the
<code>growthcleanr</code> package must be installed. To install the
latest <code>growthcleanr</code> release from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"growthcleanr"</span><span class="op">)</span></span></code></pre></div>
<p>To install the latest development version from GitHub using
<code>devtools</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"carriedaymont/growthcleanr"</span>, ref<span class="op">=</span><span class="st">"main"</span><span class="op">)</span></span></code></pre></div>
<p>Installing <code>growthcleanr</code> will install several additional
packages in turn.</p>
<p>Further installation details and notes can be found under <a href="installation.html">Installation</a>.</p>
</div>
<div class="section level2">
<h2 id="data-preparation">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>Once the <code>growthcleanr</code> package and its dependencies are
installed, the minimal input data vectors needed for cleaning data
are:</p>
<ol style="list-style-type: decimal">
<li>
<code>subjid</code> - a unique identifier for each subject; if you
have long (64-bit) integer <code>subjid</code> values, add the
<code>bit64</code> R package to your install list to ensure R will
process these correctly</li>
<li>
<code>param</code> - a string designating the measurement being
‘<code>HEIGHTCM</code>’, ‘<code>LENGTHCM</code>’, or
‘<code>WEIGHTKG</code>’</li>
<li>
<code>agedays</code> - a numeric value for age in days at time of
measurement; will be rounded down (floor) to nearest integer if needed
(note that there are 30.4375 days in one month; see also the additional
<a href="https://www.cdc.gov/nccdphp/dnpao/growthcharts/resources/sas.htm" class="external-link">notes
on calculating <code>agemos</code></a> from whole numbers of months</li>
<li>
<code>sex</code> - a numeric value of <code>0</code> (male) or
<code>1</code> (female)</li>
<li>
<code>measurement</code> - numeric value of measurement in cm for
height or kg for weight</li>
</ol>
<p><strong>Note</strong>: the dataset should be sorted by
<code>subjid</code>, <code>param</code>, and <code>agedays</code>, as
demonstrated in the Example below.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Starting with a dataset such as the following:</p>
<table class="table">
<thead><tr class="header">
<th>subjid</th>
<th>param</th>
<th>agedays</th>
<th>sex</th>
<th>measurement</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>HEIGHTCM</td>
<td>2790</td>
<td>0</td>
<td>118.5</td>
</tr>
<tr class="even">
<td>1</td>
<td>HEIGHTCM</td>
<td>3677</td>
<td>0</td>
<td>148.22</td>
</tr>
<tr class="odd">
<td>1</td>
<td>WEIGHTKG</td>
<td>2790</td>
<td>0</td>
<td>23.8</td>
</tr>
<tr class="even">
<td>1</td>
<td>WEIGHTKG</td>
<td>3677</td>
<td>0</td>
<td>38.41</td>
</tr>
<tr class="odd">
<td>2</td>
<td>HEIGHTCM</td>
<td>2112</td>
<td>1</td>
<td>118.2</td>
</tr>
<tr class="even">
<td>2</td>
<td>HEIGHTCM</td>
<td>2410</td>
<td>1</td>
<td>123.9</td>
</tr>
<tr class="odd">
<td>2</td>
<td>HEIGHTCM</td>
<td>2708</td>
<td>1</td>
<td>128.03</td>
</tr>
<tr class="even">
<td>2</td>
<td>HEIGHTCM</td>
<td>3029</td>
<td>1</td>
<td>135.3</td>
</tr>
<tr class="odd">
<td>2</td>
<td>WEIGHTKG</td>
<td>2112</td>
<td>1</td>
<td>25.84</td>
</tr>
<tr class="even">
<td>2</td>
<td>WEIGHTKG</td>
<td>2410</td>
<td>1</td>
<td>28.61</td>
</tr>
<tr class="odd">
<td>2</td>
<td>WEIGHTKG</td>
<td>2708</td>
<td>1</td>
<td>28.61</td>
</tr>
<tr class="even">
<td>2</td>
<td>WEIGHTKG</td>
<td>3029</td>
<td>1</td>
<td>34.5</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>Note that in this example, we see data from two subjects, sorted as
described above, with two pairs of height/weight measurements for the
first patient and four pairs for the second. Most of these values pass
the “eyeball test”, but the third weight measurement for
<code>subjid</code> 2 looks like it might be a value that has been
carried forward from the previous value, given that their same ageday
height has changed by several centimeters but their third height value
is exactly the same as their second. This is an example of an
implausible value and exclusion type that <code>growthcleanr</code>
might identify.</p>
<p>The <code><a href="../reference/cleangrowth.html">cleangrowth()</a></code> function provided by
<code>growthcleanr</code> will return a vector that specifies, for each
measurement, whether to:</p>
<ul>
<li>“<code>Include</code>” the measurement,</li>
<li>Conclude that the measurement is “<code>Missing</code>”,</li>
<li>Or to “<code>Exclude</code>” the measurement (numerous variations of
<code>Exclude</code> exist, as specified in <a href="output.html">Understanding growthcleanr output</a>).</li>
</ul>
<p>For a data.frame object <code>source_data</code> containing growth
data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://carriedaymont.github.io/growthcleanr/index.html" class="external-link">growthcleanr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prepare data as a data.table</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">as.data.table</span><span class="op">(</span><span class="va">source_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set the data.table key for better indexing</span></span>
<span><span class="fu">setkey</span><span class="op">(</span><span class="va">data</span>, <span class="va">subjid</span>, <span class="va">param</span>, <span class="va">agedays</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generate new exclusion flag field using function</span></span>
<span><span class="va">cleaned_data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span>, <span class="va">gcr_result</span> <span class="op">:=</span> <span class="fu"><a href="../reference/cleangrowth.html">cleangrowth</a></span><span class="op">(</span><span class="va">subjid</span>, <span class="va">param</span>, <span class="va">agedays</span>, <span class="va">sex</span>, <span class="va">measurement</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># extract data limited only to values flagged for inclusion:</span></span>
<span><span class="va">only_included_data</span> <span class="op">&lt;-</span> <span class="va">cleaned_data</span><span class="op">[</span><span class="va">gcr_result</span> <span class="op">==</span> <span class="st">"Include"</span><span class="op">]</span></span></code></pre></div>
<p>If our example dataset above were named <code>source_data</code>,
examining <code>cleaned_data</code> would show:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="13%">
<col width="12%">
<col width="5%">
<col width="18%">
<col width="39%">
</colgroup>
<thead><tr class="header">
<th>subjid</th>
<th>param</th>
<th>agedays</th>
<th>sex</th>
<th>measurement</th>
<th>gcr_result</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>HEIGHTCM</td>
<td>2790</td>
<td>0</td>
<td>118.5</td>
<td>Include</td>
</tr>
<tr class="even">
<td>1</td>
<td>HEIGHTCM</td>
<td>3677</td>
<td>0</td>
<td>148.22</td>
<td>Include</td>
</tr>
<tr class="odd">
<td>1</td>
<td>WEIGHTKG</td>
<td>2790</td>
<td>0</td>
<td>23.8</td>
<td>Include</td>
</tr>
<tr class="even">
<td>1</td>
<td>WEIGHTKG</td>
<td>3677</td>
<td>0</td>
<td>38.41</td>
<td>Include</td>
</tr>
<tr class="odd">
<td>2</td>
<td>HEIGHTCM</td>
<td>2112</td>
<td>1</td>
<td>118.2</td>
<td>Include</td>
</tr>
<tr class="even">
<td>2</td>
<td>HEIGHTCM</td>
<td>2410</td>
<td>1</td>
<td>123.9</td>
<td>Include</td>
</tr>
<tr class="odd">
<td>2</td>
<td>HEIGHTCM</td>
<td>2708</td>
<td>1</td>
<td>128.03</td>
<td>Include</td>
</tr>
<tr class="even">
<td>2</td>
<td>HEIGHTCM</td>
<td>3029</td>
<td>1</td>
<td>135.3</td>
<td>Include</td>
</tr>
<tr class="odd">
<td>2</td>
<td>WEIGHTKG</td>
<td>2112</td>
<td>1</td>
<td>25.84</td>
<td>Include</td>
</tr>
<tr class="even">
<td>2</td>
<td>WEIGHTKG</td>
<td>2410</td>
<td>1</td>
<td>28.61</td>
<td>Include</td>
</tr>
<tr class="odd">
<td>2</td>
<td>WEIGHTKG</td>
<td>2708</td>
<td>1</td>
<td>28.61</td>
<td>Exclude-Carried-Forward</td>
</tr>
<tr class="even">
<td>2</td>
<td>WEIGHTKG</td>
<td>3029</td>
<td>1</td>
<td>34.5</td>
<td>Include</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>In this sample output, we see that <code>growthcleanr</code> has
indeed flagged the third weight measurement for <code>subjid 2</code> as
an apparent carried forward value. The measurement remains in the
dataset, and it is up to the researcher to determine which exclusions to
accept directly or investigate further.</p>
<p>This example uses the default configuration options for
<code><a href="../reference/cleangrowth.html">cleangrowth()</a></code>. Longer examples demonstrating some common
options are in <a href="usage.html">Usage</a>, and full details about
all options are documented in <a href="configuration.html">Configuration</a>.</p>
<p>To compute percentiles and Z-scores using the included CDC macro,
continue with these next steps:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use the built-in utility function to convert the input observations to wide</span></span>
<span><span class="co"># format for BMI calculation</span></span>
<span><span class="va">cleaned_data_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/longwide.html">longwide</a></span><span class="op">(</span><span class="va">cleaned_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compute simple BMI</span></span>
<span><span class="va">cleaned_data_bmi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simple_bmi.html">simple_bmi</a></span><span class="op">(</span><span class="va">cleaned_data_wide</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compute Z-scores and percentiles</span></span>
<span><span class="va">cleaned_data_bmiz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ext_bmiz.html">ext_bmiz</a></span><span class="op">(</span><span class="va">cleaned_data_bmi</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/longwide.html">longwide()</a></code> function defaults to converting only
records included by <code><a href="../reference/cleangrowth.html">cleangrowth()</a></code>, with options to change
this default, and <code><a href="../reference/ext_bmiz.html">ext_bmiz()</a></code> will return the wide version
of the cleaned data with many metrics added. Both of these functions are
described in <a href="utilities.html">Computing BMI percentiles and
Z-scores</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Carrie Daymont, Robert Grundmeier, Jeffrey Miller, Diego Campos.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
