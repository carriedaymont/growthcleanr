<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Configuration • growthcleanr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Configuration">
<meta property="og:description" content="growthcleanr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">growthcleanr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/usage.html">Usage</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Advanced topics</li>
    <li>
      <a href="../articles/configuration.html">Configuration</a>
    </li>
    <li>
      <a href="../articles/output.html">Understanding growthcleanr output</a>
    </li>
    <li>
      <a href="../articles/adult-algorithm.html">Adult algorithm</a>
    </li>
    <li>
      <a href="../articles/utilities.html">Utilities for computing pediatric BMI percentiles, Z-scores, and related tools</a>
    </li>
    <li>
      <a href="../articles/large-data-sets.html">Working with large data sets</a>
    </li>
    <li>
      <a href="../articles/next-steps.html">Next steps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/carriedaymont/growthcleanr" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Configuration</h1>
            
            <h4 data-toc-skip class="date">2022-09-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/carriedaymont/growthcleanr/blob/main/vignettes/configuration.Rmd" class="external-link"><code>vignettes/configuration.Rmd</code></a></small>
      <div class="hidden name"><code>configuration.Rmd</code></div>

    </div>

    
    
<p><code>growthcleanr</code> offers several options for configuration, with default values set to address common cases. You may wish to experiment with the settings to discover which work best for your research and your dataset.</p>
<p>All of the following options may be set as additional parameters in the call to <code><a href="../reference/cleangrowth.html">cleangrowth()</a></code>.</p>
<div class="section level2">
<h2 id="algorithm-related-options">Algorithm-related options<a class="anchor" aria-label="anchor" href="#algorithm-related-options"></a>
</h2>
<p>The following options change the behavior of the growthcleanr algorithm.</p>
<ul>
<li><p><code>recover.unit.error</code> - default <code>FALSE</code>; when <code>FALSE</code>, measurements identified as unit errors (e.g., apparent height values in inches instead of centimeters) will be flagged but not corrected, when <code>TRUE</code> these values will be corrected and included as valid measurements for cleaning.</p></li>
<li><p><code>sd.extreme</code> - default <code>25</code>; a very extreme value check on modified (recentered) Z-scores used as a first-pass elimination of clearly implausible values, often due to misplaced decimals.</p></li>
<li><p><code>z.extreme</code> - default <code>25</code>; similar usage as <code>sd.extreme</code>, for absolute Z-scores.</p></li>
</ul>
<p><strong>NOTE</strong>: many different steps in the <code>growthcleanr</code> algorithm use highly refined techniques to identify implausible values that require more subtlety to detect. These default values for <code>sd.extreme</code> and <code>z.extreme</code> are set very high by design to eliminate completely implausible values early in the process; these extreme values require none of <code>growthcleanr</code>’s additional, more subtle approaches to be identified as exclusions. If <code>sd.extreme</code> and <code>z.extreme</code> are configured to be lower values, measurements eliminated at the early step which checks against these extreme values will not be further considered using later techniques.</p>
<ul>
<li><p><code>include.carryforward</code> - default <code>FALSE</code>; if set to <code>TRUE</code>, <code>growthcleanr</code> will skip algorithm step 9, which identifies carried forward measurements, and will not flag these values for exclusion.</p></li>
<li><p><code>ewma.exp</code> - default <code>-1.5</code>; the exponent used for weighting measurements when calculating exponentially weighted moving average (EWMA). This exponent should be negative to weight growth measurements closer to the measurement being evaluated more strongly. Exponents that are further from zero (e.g., <code>-3</code>) will increase the relative influence of measurements close in time to the measurement being evaluated compared to using the default exponent.</p></li>
<li><p><code>ref.data.path</code> - defaults to using CDC reference data from year 2000; supply a file path to use alternate reference data. Note that when running from an installed <code>growthcleanr</code> package (e.g. having called <code><a href="https://carriedaymont.github.io/growthcleanr/index.html" class="external-link">library(growthcleanr)</a></code>), this path does not need to be specified. Developers testing the source code directly from the source directory will need to specify this as well.</p></li>
<li><p><code>error.load.mincount</code> - default <code>2</code>; minimum count of exclusions on parameter for one subject before considering excluding all measurements.</p></li>
<li><p><code>error.load.threshold</code> - default <code>0.5</code>; threshold to exceed for percentage of excluded measurement count relative to count of included other measurement (e.g., if 3 of 5 WTs are excluded, and 5 corresponding HTs are included, this exceeds the 0.5 threshold and the other two WTs will be excluded).</p></li>
<li>
<p><code>lt3.exclude.mode</code> - default <code>default</code>; determines type of exclusion procedure to use for 1 or 2 measurements of one type without matching same ageday measurements for the other parameter. Options include:</p>
<ul>
<li>
<code>default</code> - standard growthcleanr approach</li>
<li>
<code>flag.both</code> - in case of two measurements with at least one beyond thresholds, flag both instead of one (as in default)</li>
</ul>
</li>
<li>
<p><code>sd.recenter</code> - default <code>NA</code>; specifies how to recenter medians. May be a data frame or table w/median SD-scores per day of life by gender and parameter, or “<code>nhanes</code>” or “<code>derive</code>” as a character vector.</p>
<ul>
<li>If <code>sd.recenter</code> is specified as a data set, use the data set</li>
<li>If <code>sd.recenter</code> is specified as “<code>nhanes</code>”, use NHANES reference medians</li>
<li>If <code>sd.recenter</code> is specified as “<code>derive</code>”, derive from input</li>
<li>If <code>sd.recenter</code> is not specified or <code>NA</code>:
<ul>
<li>If the input set has at least 5,000 observations, derive medians from input</li>
<li>If the input set has fewer than 5,000 observations, use NHANES</li>
</ul>
</li>
</ul>
<p>If specifying a data set, columns must include param, sex, agedays, and sd.median (referred to elsewhere as “modified Z-score”), and those medians will be used for centering. This data set must include a row for every ageday present in the dataset to be cleaned; the NHANES reference medians include a row for every ageday in the range (731-7305 days). A summary of how the NHANES reference medians were derived is below under <a href="#nhanes-reference-medians-1">NHANES reference data</a>.</p>
</li>
<li><p><code>adult_cutpoint</code> - default <code>20</code>; number between 18 and 20, describing age limit in years above which the pediatric algorithm should not apply (&lt; adult_cutpoint), and the adult algorithm should apply (&gt;= adult_cutpoint). Numbers outside this range will be changed to the closest number within the range.</p></li>
<li><p><code>weight_cap</code> - default <code>Inf</code>; weight_cap Positive number, describing a weight cap in kg (rounded to the nearest .1, +/- .1) within an adult dataset. This may be used when a dataset shared for research is known to clamp values for privacy reasons. If there is no weight cap, set to Inf (default). This option is not used with pediatric subjects.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="operational-options">Operational options<a class="anchor" aria-label="anchor" href="#operational-options"></a>
</h2>
<p>The following options change the execution of the program overall, with no effect on the algorithm itself.</p>
<ul>
<li><p><code>parallel</code> - default <code>FALSE</code>; set to <code>TRUE</code> to run <code>growthcleanr</code> in parallel. Running in parallel will split the input data into batches (while keeping all records for each subject together) and process each batch on a different processor/core to maximize throughput. Recommended for large datasets with more than 100K rows.</p></li>
<li><p><code>num.batches</code> - specifies the number of batches to run in parallel; only applies if <code>parallel</code> is set to <code>TRUE</code>. Defaults to the number of workers returned by the <code>getDoParWorkers()</code> function in the <code>foreach</code> package. Note that processing in parallel may affect overall system performance.</p></li>
<li><p><code>sdmedian.filename</code> - filename for optionally saving sd.median data calculated on the input dataset to as CSV. Defaults to <code>""</code>, for which this data will not be saved. Use for extracting medians for parallel processing scenarios other than the built-in parallel option. See notes on <a href="#largedata">large data sets</a> for details.</p></li>
<li><p><code>sdrecentered.filename</code> - filename to save re-centered data to as CSV. Defaults to ““, for which this data will not be saved. Useful for post-processing and debugging.</p></li>
<li><p><code>adult_columns_filename</code> - default <code>""</code>; Name of file to save original adult data, with additional output columns to as CSV. Defaults to ““, for which this data will not be saved. Useful for post-analysis. For more information on this output, please see README.</p></li>
<li><p><code>quietly</code> - default <code>TRUE</code>; when <code>TRUE</code>, displays function messages and will output log files when <code>parallel</code> is <code>TRUE</code>.</p></li>
<li><p><code>log.path</code> - default <code>"."</code>; sets directory for batch log file output when processing with <code>parallel = TRUE</code>. A new directory will be created if necessary.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="nhanes-reference-medians">NHANES reference medians<a class="anchor" aria-label="anchor" href="#nhanes-reference-medians"></a>
</h2>
<p><code>growthcleanr</code> <a href="https://github.com/carriedaymont/growthcleanr/releases" class="external-link">releases</a> up to 1.2.4 offered two options for recentering medians, either the default of deriving medians from the input set, or supplying an externally-defined set of medians. These left out an option for researchers working with either small datasets or with data which might otherwise not be representative of the population, as deriving medians from the input set in those cases might be problematic. To provide a standard default reference to address these latter cases, a set of medians were derived from the <a href="https://wwwn.cdc.gov/nchs/nhanes/Default.aspx" class="external-link">National Health and Nutrition Examination Survey</a> (NHANES). A summary of that process is below. As of release 1.2.5, the default behavior is:</p>
<ul>
<li>If <code>sd.recenter</code> is specified as a data set, use the data set</li>
<li>If <code>sd.recenter</code> is specified as <code>nhanes</code>, use NHANES</li>
<li>If <code>sd.recenter</code> is specified as <code>derive</code>, derive from input</li>
<li>If <code>sd.recenter</code> is not specified or <code>NA</code>:
<ul>
<li>If the input set has at least 5,000 observations, derive medians from input</li>
<li>If the input set has fewer than 5,000 observations, use NHANES</li>
</ul>
</li>
</ul>
<p>With the verbose <code><a href="../reference/cleangrowth.html">cleangrowth()</a></code> option <code>quietly = FALSE</code>, the recentering medians approach used will be noted in the output. If the input set has fewer than 100 observations for any age-year, this will also be noted in the output.</p>
<div class="section level3">
<h3 id="derivation-process">Derivation process<a class="anchor" aria-label="anchor" href="#derivation-process"></a>
</h3>
<p>The NHANES reference medians are based primarily on data from NHANES 2009-2010 through 2017-2018, including approximately 39,000 heights/lengths and weights from children and adolescents between the ages of 0 months and &lt;240 months. Weight and height SD scores were calculated from the <a href="https://www.cdc.gov/growthcharts/percentile_data_files.htm" class="external-link">L, M, and S parameters</a> for the <a href="https://www.cdc.gov/nccdphp/dnpao/growthcharts/resources/sas.htm" class="external-link">CDC growth charts</a> were used as the reference to calculate weight and height SD scores for the NHANES 2009-2010 through 2017-2018 samples. Based on the distributions of age-days in children at 0 months, an age adjustment was made based on the median number of days among these infants. This adjustment was made after consultation with the National Center for Health Statistics confirmed that a general assumption of ages occurring at the midpoint of the indicated integer month of age did not apply to children recorded as 0 months, and uses 0.75 months instead.</p>
<p>Weights were supplemented with a random sample of birthweights from NCHS’s <a href="https://www.nber.org/research/data/vital-statistics-natality-birth-data" class="external-link">Vital Statistics Natality Birth Data</a> for 2018. These had sample weights assigned so that the sum of the sample weights for the sample equalled the sum of the sample weights for each month for infants in NHANES, as NHANES is a multi-stage complex survey. The reference data was then smoothed using the <code>svysmooth()</code> function in the R <a href="https://cran.r-project.org/package=survey" class="external-link"><code>survey</code></a> package to estimate the weight and height SD scores for each day up to 7,305 days, with a bandwidth chosen to balance between over- and under-fitting, and interpolation between the estimates from this function was used to obtain an estimate for each day of age. Predictions from a regression model fit to smoothed height SDs between 23 and 365 days (the youngest child in NHANES had an estimated age in days of 23) were used to extend smoothed height SD scores to children between 1 and 22 days of age.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Daymont Carrie, Grundmeier Robert, Miller Jeffrey, Campos Diego, De los Santos Hannah.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
