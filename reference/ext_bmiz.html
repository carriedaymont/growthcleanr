<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate extended BMI measures — ext_bmiz • growthcleanr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate extended BMI measures — ext_bmiz"><meta property="og:description" content="ext_bmiz Calculates the sigma (scale parameter for the half-normal
distribution), extended BMI percentile, extended BMIz, and the CDC LMS
Z-scores for weight, height, and BMI for children between 2 and 19.9 years
of age. Note that for BMIs &amp;lt;= 95th percentile of the CDC growth charts, the
extended values for BMI are equal to the LMS values. The extended values
differ only for children who have a BMI &amp;gt; 95th percentile."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">growthcleanr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/usage.html">Usage</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Advanced topics</li>
    <li>
      <a href="../articles/configuration.html">Configuration</a>
    </li>
    <li>
      <a href="../articles/output.html">Understanding growthcleanr output</a>
    </li>
    <li>
      <a href="../articles/adult-algorithm.html">Adult algorithm</a>
    </li>
    <li>
      <a href="../articles/utilities.html">Utilities for computing pediatric BMI percentiles, Z-scores, and related tools</a>
    </li>
    <li>
      <a href="../articles/large-data-sets.html">Working with large data sets</a>
    </li>
    <li>
      <a href="../articles/next-steps.html">Next steps</a>
    </li>
    <li>
      <a href="../articles/developer-guidelines.html">Developer guidelines</a>
    </li>
    <li>
      <a href="../articles/prelim-infants-algorithm.html">Preliminary infants algorithm</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/carriedaymont/growthcleanr" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate extended BMI measures</h1>
    <small class="dont-index">Source: <a href="https://github.com/carriedaymont/growthcleanr/blob/main/R/cdc.R" class="external-link"><code>R/cdc.R</code></a></small>
    <div class="hidden name"><code>ext_bmiz.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>ext_bmiz</code> Calculates the sigma (scale parameter for the half-normal
distribution), extended BMI percentile, extended BMIz, and the CDC LMS
Z-scores for weight, height, and BMI for children between 2 and 19.9 years
of age. Note that for BMIs &lt;= 95th percentile of the CDC growth charts, the
extended values for BMI are equal to the LMS values. The extended values
differ only for children who have a BMI &gt; 95th percentile.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ext_bmiz</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  age <span class="op">=</span> <span class="st">"agem"</span>,</span>
<span>  wt <span class="op">=</span> <span class="st">"wt"</span>,</span>
<span>  ht <span class="op">=</span> <span class="st">"ht"</span>,</span>
<span>  bmi <span class="op">=</span> <span class="st">"bmi"</span>,</span>
<span>  adjust.integer.age <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ref.data.path <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data frame or data table</p></dd>


<dt id="arg-age">age<a class="anchor" aria-label="anchor" href="#arg-age"></a></dt>
<dd><p>Name of input column containing subject age in months in quotes, default "agem"</p></dd>


<dt id="arg-wt">wt<a class="anchor" aria-label="anchor" href="#arg-wt"></a></dt>
<dd><p>Name of input column containing weight (kg) value in quotes, default "wt"</p></dd>


<dt id="arg-ht">ht<a class="anchor" aria-label="anchor" href="#arg-ht"></a></dt>
<dd><p>Name of input column containing height (cm) value in quotes, default "ht"</p></dd>


<dt id="arg-bmi">bmi<a class="anchor" aria-label="anchor" href="#arg-bmi"></a></dt>
<dd><p>Name of input column containing calculated BMI in quotes, default "bmi"</p></dd>


<dt id="arg-adjust-integer-age">adjust.integer.age<a class="anchor" aria-label="anchor" href="#arg-adjust-integer-age"></a></dt>
<dd><p>If age inputs are all integer, add 0.5 if TRUE;
default TRUE</p></dd>


<dt id="arg-ref-data-path">ref.data.path<a class="anchor" aria-label="anchor" href="#arg-ref-data-path"></a></dt>
<dd><p>Path to directory containing reference data</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Expanded data frame containing computed BMI values</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function should produce output equivalent to the SAS macro provided at
https://www.cdc.gov/growth-chart-training/hcp/computer-programs/sas.html. The macro
was updated in December, 2022, according to the findings of the NCHS
report available at https://dx.doi.org/10.15620/cdc:121711. This function has
been updated to match it as of growthcleanr v2.1.0.</p>
<p>The extended BMIz is the inverse cumulative distribution function (CDF) of
the extended BMI percentile. If the extended percentile is very close to
100, the <code>qnorm</code> function in R produces an infinite value. This occurs
only if the the extended BMI percentile is &gt; 99.99999999999999. This occurs
infrequently, such as a 48-month-old with a BMI &gt; 39, and it is likely that
these BMIs represent data entry errors. For these cases, extended BMIz is
set to 8.21, a value that is slightly greater than the largest value that
can be calculated.</p>
<p>See the <code>README.md</code> file for descriptions of the output columns
generated by this function.</p>
<p><code>data</code> must have columns for at least age, sex, weight, height, and bmi.</p>
<p><code>age</code> should be coded in months, using the most precise values available.
To convert to months from age in years, multiply by 12. To convert to months
from age in days, divide by 30.4375 (365.25 / 12).</p>
<p><code>sex</code> is coded as 1, boys, Boys, b, B, males, Males, m, or M for male
subjects or 2, girls, Girls, g, G, females, Females, f, or F for female
subjects. Note that this is different from <code>cleangrowth</code>, which uses
0 (Male) and 1 (Female).</p>
<p><code>wt</code> should be in kilograms.</p>
<p><code>ht</code> should be in centimeters.</p>
<p>Specify the input data parameter names for <code>age</code>, <code>wt</code>,
<code>ht</code>, <code>bmi</code> using quotation marks. See example below.</p>
<p>If the parameter <code>adjust.integer.age</code> is <code>TRUE</code> (the default),
0.5 will be added to all <code>age</code> if all input values are integers. Set to
<code>FALSE</code> to disable.</p>
<p>By default, the reference data file <code>CDCref_d.csv</code>, made available at
https://www.cdc.gov/growth-chart-training/hcp/computer-programs/sas.html, is included
in this package for convenience. If you are developing this package, use
<code>ref.data.path</code> to adjust the path to this file from your working
directory if necessary.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Run on a small subset of given data</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">syngrowth</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">subjid</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="st">"subjid"</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>            <span class="st">"gcr_result"</span> <span class="op">=</span> <span class="fu"><a href="cleangrowth.html">cleangrowth</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">subjid</span>,</span></span>
<span class="r-in"><span>                                       <span class="va">df</span><span class="op">$</span><span class="va">param</span>,</span></span>
<span class="r-in"><span>                                       <span class="va">df</span><span class="op">$</span><span class="va">agedays</span>,</span></span>
<span class="r-in"><span>                                       <span class="va">df</span><span class="op">$</span><span class="va">sex</span>,</span></span>
<span class="r-in"><span>                                       <span class="va">df</span><span class="op">$</span><span class="va">measurement</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="longwide.html">longwide</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="co"># convert to wide format for ext_bmiz</span></span></span>
<span class="r-in"><span><span class="va">df_wide_bmi</span> <span class="op">&lt;-</span> <span class="fu"><a href="simple_bmi.html">simple_bmi</a></span><span class="op">(</span><span class="va">df_wide</span><span class="op">)</span> <span class="co"># compute simple BMI</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calling the function with default column names</span></span></span>
<span class="r-in"><span><span class="va">df_bmiz</span> <span class="op">&lt;-</span> <span class="fu">ext_bmiz</span><span class="op">(</span><span class="va">df_wide_bmi</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specifying different column names; note that quotes are used</span></span></span>
<span class="r-in"><span><span class="va">dfc</span> <span class="op">&lt;-</span> <span class="fu"><a href="simple_bmi.html">simple_bmi</a></span><span class="op">(</span><span class="va">df_wide</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dfc</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dfc</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"agem"</span>, <span class="st">"wt"</span>, <span class="st">"ht"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"agemos"</span>, <span class="st">"weightkg"</span>, <span class="st">"heightcm"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_bmiz</span> <span class="op">&lt;-</span> <span class="fu">ext_bmiz</span><span class="op">(</span><span class="va">dfc</span>, age<span class="op">=</span><span class="st">"agemos"</span>, wt<span class="op">=</span><span class="st">"weightkg"</span>, ht<span class="op">=</span><span class="st">"heightcm"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Disabling conversion of all-integer age in months to (age + 0.5)</span></span></span>
<span class="r-in"><span><span class="va">dfc</span> <span class="op">&lt;-</span> <span class="fu"><a href="simple_bmi.html">simple_bmi</a></span><span class="op">(</span><span class="va">df_wide</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_bmiz</span> <span class="op">&lt;-</span> <span class="fu">ext_bmiz</span><span class="op">(</span><span class="va">dfc</span>, adjust.integer.age<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Carrie Daymont, Robert Grundmeier, Jeffrey Miller, Diego Campos.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

